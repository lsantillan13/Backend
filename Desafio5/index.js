//------------------------------------------------------------------------- Imports -------------------------------------------------------------------------------------\\
/**/                                                                                                                                                                   /**/
/**/ if (process.env.NODE_ENV !== 'production')                                                                                                                        /**/
/**/  {require('dotenv').config()}                                                                                                                                     /**/
/**/ const express = require('express');                                                                                                                               /**/
/**/ const mongoose = require('mongoose');                                                                                                                             /**/
/**/ const cors = require('cors');                                                                                                                                     /**/
/**/ const multer = require('multer');                                                                                                                                 /**/
/**/ const morgan = require('morgan');                                                                                                                                 /**/
/**/ const path = require('path');                                                                                                                                     /**/
/**/ const fs = require('fs');                                                                                                                                         /**/
/**/ //const Container = require('./controllers/product.controllers.js');                                                                                                /**/
/**/ const exphbs = require('express-handlebars');                                                                                                                     /**/
/**/ const bodyParser = require('body-parser');                                                                                                                        /**/
/**/                                                                                                                                                                   /**/
//-------------------------------------------------------------------------  Models  ------------------------------------------------------------------------------------\\
/**/ //const Products = require('./models/products');                                                                                                                  /**/
//----------------------------------------------------------------------- Initialization --------------------------------------------------------------------------------\\
/**/                                                                                                                                                                   /**/
/**/ const app = express();                                                                                                                                            /**/
/**/ //require('./database')                                                                                                                                           /**/
/**/                                                                                                                                                                   /**/
//------------------------------------------------------------------------ Middlewares ----------------------------------------------------------------------------------\\
/**/                                                                                                                                                                   /**/
/**/ app.use(express.json());                                                                                                                                          /**/
/**/ app.use(bodyParser.urlencoded({extended: true}));                                                                                                                 /**/
/**/ app.set('json spaces', 8);                                                                                                                                        /**/
/**/ app.use(cors());                                                                                                                                                  /**/
/**/ app.use(morgan('dev'));                                                                                                                                           /**/
/**/                                                                                                                                                                   /**/
//------------------------------------------------------------------------ Static files ---------------------------------------------------------------------------------\\
/**/                                                                                                                                                                   /**/
/**/ //app.use(express.static(path.join(__dirname, 'public')));                                                                                                        /**/
/**/ app.set('views', path.join(__dirname, 'views'));                                                                                                                  /**/    
/**/ app.engine('hbs', exphbs.engine({                                                                                                                                 /**/
/**/    defaultLayout: "main",                                                                                                                                         /**/
/**/    layoutsDir: path.join(app.get('views'), '/layouts'),                                                                                                           /**/
/**/    partialsdir: path.join(app.get('views'), '/partials'),                                                                                                         /**/
/**/    extname: ".hbs",                                                                                                                                               /**/
/**/ }));                                                                                                                                                              /**/
/**/ app.set('view engine', 'hbs');                                                                                                                                    /**/
/**/ app.use(express.static("public"));                                                                                                                                /**/
/**/                                                                                                                                                                   /**/
//-------------------------------------------------------------------------- Routes --------------------------------------------------------------------------------------\\
/**/                                                                                                                                                                   /**/
/**/ const productsRoutes = require('./Router/products.routes');                                                                                                       /**/
/**/ // API                                                                                                                                                            /**/
/**/ app.use('/api', productsRoutes);                                                                                                                                  /**/
/**/ app.get('/formulario');                                                                                                                                           /**/
/**/ // Client                                                                                                                                                         /**/
/**/ app.get('/', ( req, res ) => { res.render('index')});                                                                                                             /**/
/**/ app.get('/productos', ( req, res) => {res.render('products')});                                                                                                   /**/
/**/                                                                                                                                                                   /**/
//------------------------------------------------------------------------ Server up --------------------------------------------------------------------------------------\\
/**/                                                                                                                                                                   /**/
/**/ app.set('port', process.env.PORT || 3000);                                                                                                                        /**/
/**/ app.listen(app.get('port'), () => {console.log('Server is running on port', app.get('port')); });                                                                 /**/
/**/                                                                                                                                                                   /**/
/**/                                                                                                                                                                   /**/
//------------------------------------------------------------------------ Server up -------------------------------------------------------------------------------------\\
//------------------------------------------------------------------------ Server up -------------------------------------------------------------------------------------\\
//------------------------------------------------------------------------ Server up -------------------------------------------------------------------------------------\\
//------------------------------------------------------------------------ Server up -------------------------------------------------------------------------------------\\
//------------------------------------------------------------------------ Server up -------------------------------------------------------------------------------------\\